@page "/settings"
@implements IDisposable
@inherits PageComponentBase<int,int>
@inject ISettingManager settingManager
@inject IUpdateService updateService
@using chd.CaraVan.Contracts.Contants
@using chd.CaraVan.UI.Components.Pages.Cards


<div class="setting">
    Version: @this._currentVersion
</div>

<Reboot Token="this._cts.Token" />

@code {
    private CancellationTokenSource _cts = new();
    private Version _currentVersion;

    protected override async Task OnInitializedAsync()
    {
        this.Title = "Settings";
        this._currentVersion = await this.updateService.CurrentVersion();
    }

    public void Dispose()
    {
        this._cts.Cancel();
        this._cts.Dispose();
    }
}